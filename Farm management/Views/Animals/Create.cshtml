@{
    ViewData["Title"] = "لوحة التحكم";
}

<div class="container-fluid mt-3">
    <div class="row" style="min-height: 85vh;">

        <div class="col-md-2 bg-dark rounded p-3 text-white shadow">
            <h5 class="text-center mb-4 border-bottom pb-2">الأقسام</h5>
            <div class="d-grid gap-2">
                <button onclick="loadSection('barns')" class="btn btn-outline-light border-0 text-start">
                    <i class="bi bi-door-open"></i> الحظائر
                </button>
                <button onclick="loadSection('animals')" class="btn btn-outline-light border-0 text-start">
                    <i class="bi bi-pigeon"></i> الحيوانات
                </button>
                <button onclick="loadSection('hatchery')" class="btn btn-outline-light border-0 text-start">
                    <i class="bi bi-egg"></i> التفريخ
                </button>
                <button onclick="loadSection('clinic')" class="btn btn-outline-danger border-0 text-start text-danger">
                    <i class="bi bi-heart-pulse"></i> العيادة
                </button>
            </div>
        </div>

        <div class="col-md-10 px-4">
            <div id="filter-container" class="mb-3 p-3 bg-white rounded shadow-sm d-flex gap-2">
                <span class="text-muted">اختر قسماً لعرض أزرار الفلترة...</span>
            </div>

            <div class="card shadow-sm border-0">
                <div class="card-body p-0">
                    <table class="table table-hover mb-0">
                        <thead id="table-head" class="table-dark">
                            <tr><th>يرجى اختيار قسم من القائمة اليمنى</th></tr>
                        </thead>
                        <tbody id="table-body">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>
</div>

@section Scripts {
    <script>
        // دالة لجلب البيانات من الـ FarmData API وتحديث الجدول
        async function loadSection(section) {
            const head = document.getElementById('table-head');
            const body = document.getElementById('table-body');
            const filters = document.getElementById('filter-container');

            // طلب البيانات من الـ API
            const res = await fetch(`/api/FarmData/${section}`);
            const data = await res.json();

            // بناء الجدول حسب القسم
            if (section === 'barns') {
                filters.innerHTML = '<button class="btn btn-sm btn-secondary">فلترة حسب السعة</button>';
                head.innerHTML = '<tr><th>رقم</th><th>الاسم</th><th>السعة</th></tr>';
                body.innerHTML = data.map(b => `<tr><td>A${b.id}</td><td>${b.name}</td><td>${b.capacity}</td></tr>`).join('');
            }
            // سنكمل بقية الأقسام (animals, clinic...) بنفس الطريقة
        }
    </script>
}